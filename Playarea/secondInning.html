<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <title>play</title>
</head>
<link rel="stylesheet" href="./play copy.css">
<script>

    const uri = 'http://localhost:8080/book-cricket/second-inning';
    function getResponseFromAPI() {
        var xhReq = new XMLHttpRequest();
        xhReq.open("GET", uri, false);
        xhReq.send(null);
        var jsonObject = JSON.parse(xhReq.responseText);
        document.getElementById("score").innerHTML = jsonObject.totalScore;
        document.getElementById("over").innerHTML = jsonObject.totalovers;
        document.getElementById("playerName").innerHTML = jsonObject.playerName;
        document.getElementById("wicket").innerHTML = jsonObject.wicketCount;
        document.getElementById("remaining").innerHTML = jsonObject.remainingScore;
        document.getElementById("com").innerHTML = jsonObject.comcommentary;
        document.getElementById("teamName").innerHTML = jsonObject.teamName;
        document.getElementById("rr").innerHTML = jsonObject.currentRunRate;
        document.getElementById("target").innerHTML = jsonObject.target;
        console.log(jsonObject);

        if (jsonObject.result !== null) {
            var table = document.getElementById("tb");
            table.remove();
            var div = document.getElementById("comdiv");
            div.remove();
            var hit = document.getElementById("hit");
            hit.remove();
            var uld = document.getElementById("uld");
            uld.remove();
            var h1 = document.createElement("h1");
            h1.innerText = jsonObject.result;
            h1.style.marginLeft = "30%";
            h1.style.marginTop = "-30%";
            h1.style.position = "absolute";
            h1.style.color = "cadetblue";
            document.body.appendChild(h1);

            var x = document.createElement("IMG");
            x.style.position = "absolute";
            x.setAttribute("src", "unnamed.png");
            x.setAttribute("width", "400");
            x.setAttribute("height", "400");
            x.setAttribute("alt", "The Pulpit Rock");
            x.style.marginTop = "-40%";
            x.style.marginLeft = "0%";
            document.body.appendChild(x);
            var y = document.createElement("IMG");
            y.style.position = "absolute";
            y.setAttribute("src", "unnamed.png");
            y.setAttribute("width", "400");
            y.setAttribute("height", "400");
            y.setAttribute("alt", "The Pulpit Rock");
            y.style.marginTop = "-40%";
            y.style.marginLeft = "72%";
            document.body.appendChild(y);
            var ballon = document.createElement("IMG");
            ballon.style.position = "absolute";
            ballon.setAttribute("src", "confetti_PNG87041.png");
            ballon.setAttribute("width", "600");
            ballon.setAttribute("height", "600");
            ballon.setAttribute("alt", "The Pulpit Rock");
            ballon.style.marginTop = "10%";
            ballon.style.marginLeft = "30%";
            document.body.appendChild(ballon);

            let start = Date.now();
            let timer = setInterval(function () {
                let timePassed = Date.now() - start;
                ballon.style.bottom = timePassed / 8 + 'px';
                if (timePassed > 8000) clearInterval(timer);
            }, 50);

            var ballon2 = document.createElement("IMG");
            ballon2.style.position = "absolute";
            ballon2.setAttribute("src", "confetti_PNG87041.png");
            ballon2.setAttribute("width", "600");
            ballon2.setAttribute("height", "600");
            ballon2.setAttribute("alt", "The Pulpit Rock");
            ballon2.style.marginTop = "-43%";
            ballon2.style.marginLeft = "2%";
            document.body.appendChild(ballon2);

            let start2 = Date.now();
            let timer2 = setInterval(function () {
                let timePassed = Date.now() - start2;
                ballon2.style.bottom = timePassed / 8 + 'px';
                if (timePassed > 8000) clearInterval(timer2);
            }, 50);
            var ballon3 = document.createElement("IMG");
            ballon3.style.position = "absolute";
            ballon3.setAttribute("src", "confetti_PNG87041.png");
            ballon3.setAttribute("width", "600");
            ballon3.setAttribute("height", "600");
            ballon3.setAttribute("alt", "The Pulpit Rock");
            ballon3.style.marginTop = "-41%";
            ballon3.style.marginLeft = "55%";
            document.body.appendChild(ballon3);

            let start3 = Date.now();
            let timer3 = setInterval(function () {
                let timePassed = Date.now() - start3;
                ballon3.style.bottom = timePassed / 8 + 'px';
                if (timePassed > 8000) clearInterval(timer3);
            }, 50);
        }
    }



</script>

<body>
    <div class="bg">
        <ul id="uld">
            <li><img src="india.png" class="img1"></li>
            <li class="li2">
                <h1>VS</h1>
            </li>
            <li><img class="img2"
                    src="australia.png">
            </li>
            <li id="playerName">Player name
            </li>
            <p id="tg">
                Target: </p>
            <p id="target"></p>
        </ul>
        <button class="button1" id="hit"  onclick="getResponseFromAPI()">HIT</button>
        <div class="comdiv" id="comdiv">
            <img src="./commentry.png" style="height: 30%;width:30%;" class="imge">
            <h1 id="com"></h1>
        </div>
        <div  class="table" id="tb">
            <table class="table table-dark table-striped table-bordered">
                <tr>
                    <th id="teamName" colspan="5"></th>
                </tr>
                <tr>
                    <td>SCORE</td>
                    <td>WICKETS</td>
                    <td>OVERS</td>
                    <td>RUN RATE</td>
                    <td>REMAINING RUN</td>
                </tr>
                <tr>
                    <td id="score">0</td>
                    <td id="wicket">0</td>
                    <td id="over">0</td>
                    <td id="rr">0</td>
                    <td id="remaining">0</td>
                </tr>
            </table>

        </div>

</body>

</html>